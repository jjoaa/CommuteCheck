<Page x:Class="Kiosk.Pages.LocationSelectionPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:views="clr-namespace:Kiosk.Views"
      Title="">

    <Grid Background="#0B1440">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- 헤더 -->
        <views:HeaderView Grid.Row="0" Background="#000000" />

        <!-- 콘텐츠 -->
        <Border Grid.Row="1" Background="White" Margin="60">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!-- 타이틀 -->
                <TextBlock Text="위치 선택"
                           Grid.Row="0"
                           FontSize="24"
                           FontWeight="Bold"
                           Foreground="#0B1440"
                           HorizontalAlignment="Center"
                           Margin="0,30,0,20" />
                <TextBlock Text="근태관리시스템을 사용할 해당 지점을 선택해 주세요"
                           FontSize="13"
                           FontWeight="Bold"
                           Foreground="DarkGray"
                           HorizontalAlignment="Center"
                           Margin="0,70,0,20" />

                <!-- 리스트 -->
                <ScrollViewer Grid.Row="1" Margin="30,0" VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding Locations}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button
                                    Command="{Binding DataContext.SelectCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                    CommandParameter="{Binding}"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    Padding="10,5"
                                    HorizontalContentAlignment="Stretch">

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <!-- 위치 이름 -->
                                        <TextBlock Text="{Binding LocationName}"
                                                   Grid.Column="0"
                                                   FontSize="18"
                                                   VerticalAlignment="Center" />

                                        <!-- 체크박스 이미지 -->
                                        <Image Grid.Column="1" Width="24" Height="24">
                                            <Image.Style>
                                                <Style TargetType="Image">
                                                    <Setter Property="Source" Value="/Images/select.png" />
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                                            <Setter Property="Source" Value="/Images/isselected.png" />
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Image.Style>
                                        </Image>
                                    </Grid>
                                </Button>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>

                <!-- 완료 버튼 -->
                <StackPanel Grid.Row="2" Margin="30,20">
                    <TextBlock FontSize="16" HorizontalAlignment="Left" Margin="0,0,0,10">
                        <Run Text="선택된 지점 - " Foreground="Gray" />
                        <Run Text="{Binding SelectedLocationText, Mode=OneWay}" Foreground="#FFA900" />
                    </TextBlock>

                    <Button Content="선택완료"
                            Style="{StaticResource PrimaryActionButtonStyle}"
                            Command="{Binding CompleteCommand}"
                            IsEnabled="{Binding IsLocationSelected}"
                            Background="{Binding IsLocationSelected, Converter={StaticResource BoolToColorConverter}}" />
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>