<Page x:Class="Kiosk.Pages.LoginPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:converters="clr-namespace:Kiosk.Converters"
      xmlns:views="clr-namespace:Kiosk.Views"
      Title="">

    <Page.Resources>
        <converters:TextToVisibilityConverter x:Key="TextToVisibilityConverter" />
        <converters:PasswordToVisibilityConverter x:Key="PasswordToVisibilityConverter" />
        <!-- PasswordBox스타일 -->
        <Style x:Key="FocusablePasswordBoxStyle" TargetType="PasswordBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="PasswordBox">
                        <Border x:Name="border"
                                BorderBrush="#CCCCCC"
                                BorderThickness="1"
                                CornerRadius="5"
                                Background="#FFFFFF"
                                Margin="10 0 0 0">
                            <Grid>
                                <!-- 실제 입력 필드 -->
                                <PasswordBox x:Name="PART_PasswordBox"
                                             BorderThickness="0"
                                             Background="Transparent"
                                             Padding="20"
                                             FontSize="20"
                                             PasswordChanged="PasswordBox_PasswordChanged" />
                                <!-- Placeholder -->
                                <TextBlock Text="비밀번호를 입력해주세요."
                                           Foreground="#AAAAAA"
                                           Padding="20"
                                           FontSize="20"
                                           VerticalAlignment="Center"
                                           Visibility="{Binding Password, Converter={StaticResource PasswordToVisibilityConverter}}"
                                           IsHitTestVisible="False" />
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#FFA900" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <Grid Background="#0B1440">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- 헤더 -->
        <views:HeaderView Grid.Row="0" Background="#000000" />
        <!-- 로그인 콘텐츠 -->
        <StackPanel Grid.Row="1"
                    Margin="60 0"
                    VerticalAlignment="Center"
                    Background="White">
            <TextBlock Text="로그인"
                       FontSize="40"
                       FontWeight="Bold"
                       Height="130"
                       Foreground="#0B1440"
                       HorizontalAlignment="Center"
                       Margin="0 50" />

            <!-- ID 입력 필드 -->
            <Grid Margin="50,0,50,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="ID"
                           Grid.Column="0"
                           FontSize="20"
                           FontWeight="Bold"
                           VerticalAlignment="Center" />
                <TextBox x:Name="UsernameTextBox"
                         Grid.Column="1"
                         Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                         BorderThickness="0"
                         Height="70"
                         Padding="20"
                         FontSize="20"
                         Foreground="#333333"
                         Style="{StaticResource FocusableTextBoxStyle}" Margin="10,0,0,0" />
            </Grid>

            <!-- 비밀번호 입력 필드 -->
            <Grid Margin="50,0,50,50">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock Text="PW"
                           Grid.Column="0"
                           FontSize="20"
                           FontWeight="Bold"
                           VerticalAlignment="Center" />
                <PasswordBox x:Name="PasswordBox"
                             Grid.Column="1"
                             Height="70"
                             Padding="20"
                             FontSize="20"
                             Style="{StaticResource FocusablePasswordBoxStyle}" />
            </Grid>
            <!-- 로그인 버튼 -->
            <Button Content="로그인"
                    Style="{StaticResource LoginButtonStyle}"
                    Command="{Binding LoginCommand}"
                    IsEnabled="{Binding IsLoginEnabled}"
                    Background="{Binding IsLoginEnabled, Converter={StaticResource BoolToColorConverter}}"
                    Margin="10 0 10 0"
                    Width="530"
                    Height="70"
                    HorizontalAlignment="Center" />

            <!-- 에러 메시지 -->
            <TextBlock Text="{Binding ErrorMessage}"
                       Foreground="Red"
                       HorizontalAlignment="Center"
                       Margin="0,30,0,0"
                       FontSize="18" />
        </StackPanel>
    </Grid>
</Page>